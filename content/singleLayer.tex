%!TeX root = ../SDonchezECE8408SurveyPaper.tex

\section{Routing Within a Single Layer Network}\label{sec:singleLayer}
Routing within a single layer satellite network (or within a layer of a multi-layer network, if such a technique is implemented) appears, at first glance, to be a simple graph transversal problem. Indeed, the relatively static nature of the constellation (in the sense that, unlike the internet, there are no new nodes introduced spontaneously as an end user connects, and similarly no disappearing nodes caused by the end of a user session), seems like it would make routing trivial. Unfortunately, this is not entirely the case, specifically since the motion of the satellites in their orbits causes the graph to be highly dynamic. As a consequence, the ``best path'' through the constellation is constantly changing, resulting in a highly complex routing problem.

Traditionally, two approaches have been used in attempting to devise algorithms that resolve this problem. These approaches differ in an at first non-obvious way: what they consider as a node on the graph. The first, known as Virtual Topology Routing, is discussed in Subsection \ref{subsec:vtr}. The second, Virtual Node Routing, is discussed in Subsection \ref{subsec:vnr}.

\subsection{Virtual Topology Routing Algorithms}\label{subsec:vtr}
Virtual Topology Routing (VTR) effectively time-slices the dynamic graph into a set of ``snapshots'', each of which is representative of the state of the network at a discrete point in time. By obtaining a suitable number of these snapshots, VTR algorithms are able to accurately represent each set of adjacent nodes throughout the period of the graph. By keeping track of its position in time (and therefore space) throughout the operational period, each satellite is able to know what set of routes to use by correlating its current position and progress through the period of the graph with the correct state, and looking up the corresponding routing tables. The chief advantage of such an architecture is that it requires minimal onboard compute resources, as a satellite merely needs to lookup the correct routing table based on its current position. However, the storage of routing tables for all of the various time slices is non-trivial, and may exceed the capacity of some satellites' onboard memory. Furthermore, such an algorithm, by virtue of being pre-computed and static upon deployment, is not able to respond to loading differentials or link failures in a meaningful way.

\subsubsection{DT-DVTR Algorithm}\label{subsubsec:dt-dvtr}
Discrete Time Dynamic Virtual Topology Routing, or DT-DVTR, is the original algorithm that proposed the transformation of the dynamic constellation graph into a series of discrete states \cite{werner_dynamic_1997}. In a DT-DVTR system, an instantaneous virtual topology is constructed for each timeslice of the graph, and an iterative m-best path search algorithm (the authors of \cite{werner_dynamic_1997} suggest Dijkstra's shortest path algorithm) is used to calculate the optimal routes for each possible pair of nodes in the constellation. This process is then repeated for all timeslices of the graph. The resultant routing tables are then stored on each node for lookup. The DT-DVTR implementation proposes the calculation of a backup path for each route as a means of increasing robustness, but does not outline a method of utilizing said multiple routes for purposes of congestion control.

\subsubsection{Finite State Automata Algorithm}\label{subsubsec:fsa}
The Finite State Automata (FSA) Algorithm is another early VTR algorithm that warrants mentioning as a key contributor to the area. the FSA algorithm is very similar to DT-DVTR in that it constructs a Finite State Machine (FSM) from the timeslice routing data. This somewhat eases the computational effort required to calculate the routes offline. Independent of the FSM that gives it its name, this algorithm also utilizes a differing set of parameters in its optimization, favoring optimization of link utilization (as opposed to shortest path) in an effort to reduce chances of congestion. Unfortunately, this has a significant impact on the delay time of the algorithm's routes.

\subsubsection {DDRA Algorithm}\label{subsubsec:ddra}
Both the FSA and the DT-DVTR algorithms are ``offline'' algorithms, meaning that the routing is precomputed, and the nodes have no real mechanism by which to react to congestion or link failures. This, obviously, does not lead to a particularly robust network, preferring minimal resource consumption over flexibility. In early satellite networks (such, admittedly as those in use at the times those algorithms were proposed), such an optimization was logical as load was light and resources were constrained. However, modern networks typically must contend with much higher and less stable load, especially as consumer accessible networks such as Starlink become prevalent. To this end, a more complex set of routing algorithms, such as those utilized in the terrestrial internet, are necessary.

The Dynamic Detection Routing Algorithm (DDRA) proposes a solution to this problem. While the DDRA algorithm also features a precomputed routing table, it utilizes a system of acknowledgment (ACK) packets in order to monitor link status, and is capable of reacting appropriately to outages \cite{tan_novel_2014}. Furthermore, it is capable of monitoring the number of packets in an outgoing queue, enabling a primitive form of congestion control whereby a node can select an alternate (but still precomputed) route if the queue begins to fill up. It should be noted, however, that this visibility only extends to the packets being routed to the destination from the specific source in question, and therefore does not necessarily provide information about the state of the destination as a result of data routed from other nodes. 

\subsection{VNR-Based Routing Algorithms}\label{subsec:vnr}
The second approach commonly used in intra-layer routing is the concept of Virtual Node Routing, or VNR. VNR fundamentally differs from VTR in that the nodes in its graph are not representative of given satellites, but rather of physical locations relative to the surface of the earth. In a VNR algorithm, a given satellite occupies a node while it is within the ``coverage area'' of that point on the earth, and, as it disappears from the coverage area, it is replaced by the next satellite in the orbit. During this transfer period, state information pertaining to the node (such as channel allocations, routing table entries, and, potentially, even transfers in progress) can be transitioned from one satellite to the next. Consequentially, the network graph is constant, and is not dependent on the motion of the satellites throughout their orbits. Because of the constant nature of the graph, only one set of routing information need be constructed, which results in a substantial drop in storage requirements for the satellite. Further, the simplicity of the graph makes calculating multiple routing options much more feasible, enabling satellites to implement some form of congestion control or resiliency in the event of link or satellite failures. Conversely, the primary disadvantage of VNR is an increased compute load, as a satellite is required to facilitate the transfer of state data as outlined above as it transitions out of one cell and into another.

\subsubsection{Datagram Routing Algorithm}\label{subsec:dra}
The Datagram Routing Algorithm (DRA) was the original VNR-based routing algorithm proposed in \cite{ekici_datagram_2000}. The algorithm is effectively a textbook implementation of the process defined above, wherein logical locations for satellites are described by their position in a given orbit. Like the DT-DVTR and FSA algorithms previously discussed, DRA is an offline algorithm. However, it does have congestion control functionality similar to that implemented by the DDRA algorithm, with queue monitors providing an indication that a link may be becoming congested. Numerous other algorithms have been devised from the DRA algorithm that attempt to enhance its efficiency and reliability.

\subsubsection{DODR Algorithm}\label{subsubsec:dodr}
The Destruction-Resistant On-Demand Routing Protocol (DODR), proposed in \cite{ji_destruction-resistant_2015}, differs greatly from the various other VNR and VTR based protocols in that is is not an offline protocol. Rather, it is ``on-demand'', meaning that routing is computed as needed and can fully adapt to the network's (and individual nodes') load at any given time. Additionally, as its name suggests, it is intended to be resilient in the case of link failure due to interference, and even survive node failure autonomously. Furthermore, it utilizes a four stage process to resolve such incidents, in which it attempts to find alternate routes while minimizing the spread of its discovery packets in order to prevent contributing to congestion.